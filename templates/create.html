{% extends "base.html" %}
{% load staticfiles %}

{% block content %}
<style>
  body.spinner{
    position: fixed;
      top: 50%;
      left: 50%;
  }
</style>

<script>
	jQuery(document).ready(function($) {

		$("#myform").progression({
		  tooltipWidth: '200',
		  tooltipPosition: 'left',
		  tooltipOffset: '50',
		  showProgressBar: false,
		  showHelper: true,
		  tooltipFontSize: '15',
		  tooltipFontColor: 'fff',
		  progressBarBackground: 'fff',
		  progressBarColor: '6EA5E1',
		  tooltipBackgroundColor:'F0B922',
		  tooltipPadding: '10',
		  tooltipAnimate: true
		});

	});

	</script>
	<script>
	  

    var opts = {
      lines: 11, // The number of lines to draw
      length: 15, // The length of each line
      width: 10, // The line thickness
      radius: 30, // The radius of the inner circle
      corners: 1, // Corner roundness (0..1)
      rotate: 0, // The rotation offset
      direction: 1, // 1: clockwise, -1: counterclockwise
      color: '#000', // #rgb or #rrggbb
      speed: 0.6, // Rounds per second
      trail: 60, // Afterglow percentage
      shadow: false, // Whether to render a shadow
      hwaccel: false, // Whether to use hardware acceleration
      className: 'spinner', // The CSS class to assign to the spinner
      zIndex: 2e9, // The z-index (defaults to 2000000000)
      top: 'auto', // Top position relative to parent in px
      left: 'auto' // Left position relative to parent in px
    };

    var spinner = null;
    var spinner_div = 0;
	  
    $(document).ready(function() {
      
      spinner_div = $('#spinner').get(0);
        $("#myform").on('submit', function(e){
            e.preventDefault();
	    
	     if(spinner == null) {
          spinner = new Spinner(opts).spin(spinner_div);
        } else {
          spinner.spin(spinner_div);
        }
            var form = $(this);

            form.parsley().validate();

	    
	    
            if (form.parsley().isValid()){
	             var title=$('input[id=title]').val();
		      var start_date=$('input[id=start_date]').val();
		     var end_date=$('input[id=end_date]').val();

	      $.ajax({
           type: "POST",
           dataType:'json',
           url: "/api/sessions/",
	   headers: {Authorization: "Bearer " + sessionStorage.access_token},
           data: {
               name: title,
               start_time: start_date,
               stop_time: end_date,
           },
           // Login was successful.
           success: function(data) {
		    spinner.stop(spinner_div);
                   alert('Successfully Created');
		  location.href ="/home.html";
           },

           // Login request failed.
           error: function(xhr, errmsg, err) {
	    spinner.stop(spinner_div);
               alert("Invalid. Please Resubmit.");
           }
           
      });
               
            }
        });
    });
</script>
	
	
  	<style>
		#myform{
			width:300px;
			margin: 0 auto;
		}
		label{
			display:block;
		}
		input,textarea{
			width:75%;
		}
	</style>
	




    <div id="create">  
     <h2>Create</h2>
	 
	  
    <div id="contentleft">
					
		<form name="tracform" id="myform" method="POST" data-parsley-validate>
		  <p>
		      <label for="">Workout Title:</label> 
		      <input data-progression="" type="text" data-helper="Title of the workout to help you identify it later" id="title" value="" placeholder="" required data-parsley-group="block1" />
		  </p>
		   <p>
		      <label for="">Start Date:</label> 
		      <input data-progression="" type="text" data-helper="Date that you plan to start the workout, YYYY-MM-DD" id="start_date" value="" placeholder="" required data-parsley-group="block1" />
		  </p>
		    <p>
		      <label for="">End Date:</label> 
		      <input data-progression="" type="text" data-helper="Date that you plan to end the workout, YYYY-MM-DD" id="end_date" value="" placeholder="" required data-parsley-group="block1"/>
		  </p>
		     <p>
		      <label for="">Interval Distance:</label> 
		      <input data-progression="" type="text" data-helper="Distance (in miles) of the repeat being run. I.E. in 4x400, put .25 " id="distance" value="" placeholder=""/>
		  </p>
		     <p>
		      <label for="">Number of Repeats:</label> 
		      <input data-progression="" type="text" data-helper="Quantity of thee repeat being run. I.E. in 4x400, put 4 " id="repeats" value="" placeholder=""/>
		  </p>
		     
		     <p>
		      
		      <label>Reader #:</label>
						<span>
							<select>
									<option>Reader 1 (ID# XXXX)</option>
							</select>
						</span>
		     </p>
		    <br>
		     <p>
		      <label>Reader Position:</label>
						<span>
							<select>
									<option>Start/Finish</option>
									<option>Finish</option>
							</select>
						</span>
		     </p>
		     
		          <div class="button-container">
		    <input type="submit" name="" class="validate" id="submit" value="Save" />
	                         </div>
		</form>
		
				
					
					
					
					
				
    </div>
                   <div id="contentright">
We currently only support single reader workouts. <br><br> Readers need to be positioned on either a start/finish line or a finish line.
<br><br>
<img src="{% static "img/track1.png" %}" width="100%">
              </div>
    
    
     
      </div>
    {% endblock %} 
    
    
    
</html>

