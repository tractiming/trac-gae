{% extends "base.html" %}
{% load staticfiles %}

{% block content %}


<script>
  //step by step jquery plugin that explains each box of form
	jQuery(document).ready(function($) {

		$("#myform").progression({
		  tooltipWidth: '200',
		  tooltipPosition: 'left',
		  tooltipOffset: '50',
		  showProgressBar: false,
		  showHelper: true,
		  tooltipFontSize: '15',
		  tooltipFontColor: 'fff',
		  progressBarBackground: 'fff',
		  progressBarColor: '6EA5E1',
		  tooltipBackgroundColor:'F0B922',
		  tooltipPadding: '10',
		  tooltipAnimate: true
		});

	});

	</script>
	<script>
    $(document).ready(function() {
      //on submit prevent default of form and show spinner, 
        $("#myform").on('submit', function(e){
            e.preventDefault();
	    $(".modal-animate").show();
            var form = $(this);
	    //validate that form is correclty filled out
            form.parsley().validate();

	    //if valid perform ajax request
	    
            if (form.parsley().isValid()){
	             var title=$('input[id=title]').val();
		      var start_date=$('input[id=start_date]').val();
		     var end_date=$('input[id=end_date]').val();

	      $.ajax({
           type: "POST",
           dataType:'json',
           url: "/api/sessions/",
	   headers: {Authorization: "Bearer " + sessionStorage.access_token},
           data: {
               name: title,
               start_time: start_date,
               stop_time: end_date,
           },
           // Login was successful.
           success: function(data) {
		    //hide spinner, success modal, and reset form
		    $(".modal-animate").hide();
		    $("h6.notification.notification-critical").hide();
		    $("h6.notification.notification-success").show();
		    $("#myform")[0].reset();
                   
           },

           // Login request failed.
           error: function(xhr, errmsg, err) {
	    //hide spinner, show error modal
	    $(".modal-animate").hide();
	    $("h6.notification.notification-success").hide();
               $("h6.notification.notification-critical").show();
           }
           
      });
               
            }
        });
    });
</script>
	
	
  	<style>
		#myform{
			width:300px;
			margin: 0 auto;
		}
		label{
			display:block;
		}
		input,textarea{
			width:75%;
		}
	</style>
	


<div class="modal-animate hide">
    <div class="rotate"></div>

</div>

    <div id="create">  
     <h2>Create</h2>
	  <div id="notifications">
        <h6 class="notification notification-critical" role="alert">Some information you entered isn't right.</h6>
	<h6 class="notification notification-success" role="alert">You have successfully created a workout!</h6>
    </div>
	  
    <div id="contentleft">
					
		<form name="tracform" id="myform" method="POST" data-parsley-validate>
		  <p>
		      <label for="">Workout Title:</label> 
		      <input data-progression="" type="text" data-helper="Title of the workout to help you identify it later" id="title" value="" placeholder="" required data-parsley-group="block1" />
		  </p>
		   <p>
		      <label for="">Start Date:</label> 
		      <input data-progression="" type="text" data-helper="Date that you plan to start the workout, YYYY-MM-DD" id="start_date" value="" placeholder="" required data-parsley-group="block1" />
		  </p>
		    <p>
		      <label for="">End Date:</label> 
		      <input data-progression="" type="text" data-helper="Date that you plan to end the workout, YYYY-MM-DD" id="end_date" value="" placeholder="" required data-parsley-group="block1"/>
		  </p>
		     <p>
		      <label for="">Interval Distance:</label> 
		      <input data-progression="" type="text" data-helper="Distance (in miles) of the repeat being run. I.E. in 4x400, put .25 " id="distance" value="" placeholder=""/>
		  </p>
		     <p>
		      <label for="">Number of Repeats:</label> 
		      <input data-progression="" type="text" data-helper="Quantity of thee repeat being run. I.E. in 4x400, put 4 " id="repeats" value="" placeholder=""/>
		  </p>
		     
		     <p>
		      
		      <label>Reader #:</label>
						<span>
							<select>
									<option>Reader 1 (ID# XXXX)</option>
							</select>
						</span>
		     </p>
		    <br>
		     <p>
		      <label>Reader Position:</label>
						<span>
							<select>
									<option>Start/Finish</option>
									<option>Finish</option>
							</select>
						</span>
		     </p>
		     
		          <div class="button-container">
		    <input type="submit" name="" class="validate" id="submit" value="Save" />
	                         </div>
		</form>
		
				
					
					
					
					
				
    </div>
                   <div id="contentright">
We currently only support single reader workouts. <br><br> Readers need to be positioned on either a start/finish line or a finish line.
<br><br>
<img src="{% static "img/track1.png" %}" width="100%">
              </div>
    
    
     
      </div>
    {% endblock %} 
    
    
    
</html>

