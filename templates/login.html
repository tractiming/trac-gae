<!DOCTYPE html>

{% load static %}

<html lang="en" class="">
    
<head>
    <meta name="description"  content="A Chicago based startup focusing on simplifying the track and field experience." /> 

    {% block facebook_meta %}
    <meta property="og:image" content="http://trac-us.com/images/shoes-video.jpg"/>
    <meta property="og:title" content="TRAC | Timing and Racing Around the Clock "/>
    <meta property="fb:admins" content="804255640" />
    <meta property="og:type"   content="website" /> 
     <meta property="og:site_name" content="Timing and Racing Around the Clock"/>
    <meta property="og:url"    content="http://www.trac-us.com" /> 
    <meta property="og:description" content="A Chicago based startup focusing on simplifying the track and field experience." /> 
    {% endblock %}
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="canonical" href="http://www.trac-us.com"/>
    <link rel="icon" href="{% static "img/favicon.ico" %}" type="image/x-icon">
    <link rel="stylesheet" type="text/css" media="all" 
          href="{% static "css/styleNew.css" %}" />
    <link rel="stylesheet" href="{% static "css/login_style.css" %}" />
     <link rel='stylesheet' href="{% static "css/fullcalendar.css" %}" />
     	<link href="{% static "css/progression.min.css" %}" rel='stylesheet' type='text/css'>
             <link type="text/css" rel="stylesheet" href="{% static "css/jquery.dropdown.css" %}" />

    {% block js_scripts %}
    <script type="text/javascript" src="{% static "js/jquery-1.7.2.min.js" %}"></script>
    <script type="text/javascript" src="{% static "js/jquery.scrollorama.js" %}"></script>
    <script type="text/javascript" src="{% static "js/jquery.scrollTo.js" %}"></script>
    <script src="{% static "js/trac-ajax.js" %}"></script>
    <script type="text/javascript" src="{% static "js/jquery.dropdown.js" %}"></script>
<script src="{% static "js/moment.min.js" %}"></script>
<script src="{% static "js/fullcalendar.js" %}"></script>
<script type="text/javascript" src="{% static "js/jquery.serializeJSON.min.js" %}"></script>
<script type="text/javascript" src="{% static "js/parsley.min.js" %}"></script>
<script type="text/javascript" src="{% static "js/progression.min.js" %}"></script>
<script type="text/javascript" src="{% static "js/spin.min.js" %}"></script>
    <!--<script src="{% static "js/jquery-2.1.1.js" %}"></script>-->
    {% endblock %}

    <title>
        {% block title %}
        Timing and Racing Around the Clock | Chicago
        {% endblock %}
    </title>

    {% block extra_head %}
    {% endblock %}
</head>

<body>
  <div id="bowtruss-header" class="container">
    <a href="#" id="pull"></a>
    <ul>

       <li>
        <a href="/" class="scrollto logo" title="trac">trac</a>
      </li>
       
      <li></li>
      <li></li>
      <li></li>

      <li>
        
      </li>
      
               <li>
        <a href="/login.html" class="scrollto" rel="bg2">Login</a>
        </li>

      <li>
        <a href="/register.html" class="scrollto" rel="bg3">Register</a>
      </li>
     
      <li>
        <a href="http://www.trac-us.com" class="scrollto" rel="bg3">About</a>
      </li>

      <li>
        </li>

    </ul>
  </div>

  <div class="parallax">

	<script>
            	  var mySpinner = null;

function setupLoading() {    
    $('<div id="divSpin" />').appendTo(document.body);
 
    var target = document.getElementById("divSpin");
    
    var opts = {
        lines: 13, // The number of lines to draw
        length: 20, // The length of each line
        width: 10, // The line thickness
        radius: 30, // The radius of the inner circle
        corners: 1, // Corner roundness (0..1)
        rotate: 8, // The rotation offset
        direction: 1, // 1: clockwise, -1: counterclockwise
        color: '#000', // #rgb or #rrggbb or array of colors
        speed: 1, // Rounds per second
        trail: 60, // Afterglow percentage
        shadow: false, // Whether to render a shadow
        hwaccel: false, // Whether to use hardware acceleration
        className: 'mySpin', // The CSS class to assign to the spinner
        zIndex: 2e9, // The z-index (defaults to 2000000000)
        top: '50%', // Top position relative to parent
        left: '50%' // Left position relative to parent
    };
    
    mySpinner = new Spinner(opts).spin(target);
}

function removeLoading(){
    mySpinner.stop();
}

function showLoading() {
  //setupLoading();
    mySpinner.spin();
}
            
            
    $(document).ready(function() {
        $("#myform").on('submit', function(e){
            e.preventDefault();
              setupLoading();
	    
            var form = $(this);

            form.parsley().validate();

	    
	    
            if (form.parsley().isValid()){
	              var username=$('input[id=username]').val();
       var password=$('input[id=password]').val();
		    
	     $.ajax({
           type: "POST",
           dataType:'json',
           url: "/oauth2/access_token/",
           data: {
               username: username,
               password: password,
               grant_type: 'password',
               client_id: username,
           },
           // Login was successful.
          
           success: function(data) {
                     removeLoading();
                    // Get the access token and store client side.
                    var access_token = data.access_token;
                    sessionStorage.setItem('access_token', access_token);
                    location.href ="/home.html";
           },

           // Login request failed.
           error: function(xhr, errmsg, err) {
                 removeLoading();
                  $("p.notification.notification-critical").show();
               //alert("Invalid login.");
           }
           
      });
                //TO DO: AJAX
            }
        });
    });
</script>

<div id="log">

	  <div id="contentleft">
            <div id="notifications">
        <p class="notification notification-critical" role="alert">Some information you entered isn't right.</p>
    </div>
					<h2> Sign in</h2>
		<form  id="myform" data-parsley-validate >
		  <p>
		      <label>Username:</label> 
		      <input type="text" id="username" required data-parsley-group="block1"/>
		  </p>
		 <p>
		      <label>Password:</label> 
		      <input  type="password" id="password" required data-parsley-group="block1"/>
		  </p>
		     
		          <div class="button-container">
		    <input type="submit" name="" class="validate" id="submit" value="Login" />
	                         </div>
		</form>
		
				
					
					
					
					
				
            </div>
    </div>




    <div id="footer">
        <div class="content">
	        <a href="/en/home.html">
                <img alt="Logo" title="traclogo" class="cq-dd-image" 
                     src="{% static "img/traclogo_small.png" %}">
			</a>
            <br><br>

			<div class="contactModule bottom">
			    <span class="copyright">&copy; 2014 Timing and Racing Around the Clock LLC. All rights reserved.</span>
				<span class="links">
				    <a href="" target="_new">Locations</a>
					<a href="l" target="_new">Legal &amp; Privacy Notices</a>
					<a href="" target="_new">Contact Us</a>
				</span>
			</div>
        </div>
    </div>
          
  </div>


    
</body>
</html>